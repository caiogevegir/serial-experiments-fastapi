<html>
  <head>
    <title>Add Game</title>
  </head>

  <script>
    async function addGame(name, platform, status, score) {
      const url = `http://127.0.0.1:8000/games/add`;
      const response = await fetch(url, {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          name: name,
          platform: platform,
          status: status,
          score: parseInt(score)
        })
      });

      const data = await response.json();     
      const txt = ( data.created_at ) ? 'Game added successfully' : 'Failed to add game';
      document.getElementById('add-status').innerText = txt;
    }
  </script>

  <body>
    <h1>Add Game</h1>

    <label>Name:</label>
    <input id="name-input" value=""/><br/>

    <label>Platform:</label>
    <select id="platform-select">
      <option value="SWITCH">Nintendo Switch</option>
      <option value="XBOX">Microsoft XBOX</option>
      <option value="PLAYSTATION">Sony Playstation</option>
      <option value="PC">Windows PC</option>
    </select><br/>

    <label>Status:</label>
    <select id="status-select">
      <option value="BACKLOG">Backlog</option>
      <option value="PLAYING">Playing</option>
      <option value="FINISHED">Finished</option>
    </select><br/>

    <label>Score:</label>
    <input type="number" id="score-input" min="0", max="10"/><br/>

    <button onclick="addGame(
      document.getElementById('name-input').value,
      document.getElementById('platform-select').value,
      document.getElementById('status-select').value,
      document.getElementById('score-input').value,
    )">Add</button><br/>

    <p id="add-status"></p>

    <a href="index.html">Go Back</a>
  </body>
</html>