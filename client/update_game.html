<html>
  <head>
    <title>Update Game</title>
  </head>

  <script>
    async function updateGame() {
      const id = document.getElementById('id-input').value;
      const name = document.getElementById('name-input').value;
      const platform = document.getElementById('platform-select').value;
      const status = document.getElementById('status-select').value;
      const score = document.getElementById('score-input').value;

      const url = `http://127.0.0.1:8000/games/update?id=${id}`;
      const response = await fetch(url, {
        method: 'PUT',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          name: name,
          platform: platform,
          status: status,
          score: parseInt(score)
        })
      });

      const data = await response.json();     
      const txt = ( data.updated_at ) ? 'Game updated successfully' : 'Failed to update game';
      document.getElementById('update-status').innerText = txt;
    }
  </script>

  <body>
    <h1>Update Game</h1>

    <label>ID:</label>
    <input id="id-input" value=""/><br/>

    <label>Name:</label>
    <input id="name-input" value=""/><br/>

    <label>Platform:</label>
    <select id="platform-select">
      <option value="SWITCH">Nintendo Switch</option>
      <option value="XBOX">Microsoft XBOX</option>
      <option value="PLAYSTATION">Sony Playstation</option>
      <option value="PC">Windows PC</option>
    </select><br/>

    <label>Status:</label>
    <select id="status-select">
      <option value="BACKLOG">Backlog</option>
      <option value="PLAYING">Playing</option>
      <option value="FINISHED">Finished</option>
    </select><br/>

    <label>Score:</label>
    <input type="number" id="score-input" min="0", max="10"/><br/>

    <button onclick="updateGame()">Update</button><br/>
    <p id="update-status"></p>

    <a href="index.html">Go Back</a>
  </body>
</html>