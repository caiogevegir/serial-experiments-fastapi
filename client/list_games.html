<html>
  <head>
    <title>List Games</title>
  </head>

  <script>
    async function listGames(platform, status) {
      const url = `http://127.0.0.1:8000/games/list?platform=${platform}&status=${status}`;
      const response = await fetch(url);
      const data = await response.json();

      const tableBody = document.getElementById('games-list-table-body');
      tableBody.innerHTML = '';

      for ( const game of data ) {
        var row = tableBody.insertRow(-1);
        for ( const [key, value] of Object.entries(game)) {
          row.insertCell(-1).innerText = value
        }
      }
    }
  </script>

  <body>
    <h1>List Games</h1>

    <label>Platform:</label>
    <select id="platform-select">
      <option value="">All</option>
      <option value="SWITCH">Nintendo Switch</option>
      <option value="XBOX">Microsoft XBOX</option>
      <option value="PLAYSTATION">Sony Playstation</option>
      <option value="PC">Windows PC</option>
    </select><br/>

    <label>Status:</label>
    <select id="status-select">
      <option value="">All</option>
      <option value="BACKLOG">Backlog</option>
      <option value="PLAYING">Playing</option>
      <option value="FINISHED">Finished</option>
    </select><br/>

    <button onclick="listGames(
      document.getElementById('platform-select').value,
      document.getElementById('status-select').value
    )">List</button><br/><br/>

    <table id="games-list-table">
      <thead>
        <tr>
          <th><b>ID</b></th>
          <th><b>Created At</b></th>
          <th><b>Updated At</b></th>
          <th><b>Name</b></th>
          <th><b>Platform</b></th>
          <th><b>Status</b></th>
          <th><b>Score</b></th>
        </tr>
      </thead>
      <tbody id="games-list-table-body">
      </tbody>
    </table><br/>

    <a href="index.html">Go Back</a>
  </body>
</html>